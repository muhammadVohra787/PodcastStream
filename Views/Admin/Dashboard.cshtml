@using Podcast_MVC.Models.ViewModels
@model AdminDashboardViewModel

@{
    ViewData["Title"] = "Admin Dashboard";
}

<h2 class="mb-4 text-center">Admin Dashboard</h2>

<!-- Summary Cards -->
<div class="row justify-content-center mb-4 text-center">
    <div class="col-md-3 mb-3">
        <div class="card bg-primary text-white shadow-sm">
            <div class="card-body">
                <h5>Total Users</h5>
                <h3>@Model.ListenerCount</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card bg-success text-white shadow-sm">
            <div class="card-body">
                <h5>Total Podcasters</h5>
                <h3>@Model.PodcasterCount</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card bg-warning text-dark shadow-sm">
            <div class="card-body">
                <h5>Total Podcasts</h5>
                <h3>@Model.TotalPodcasts</h3>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card bg-info text-white shadow-sm">
            <div class="card-body">
                <h5>Total Episodes</h5>
                <h3>@Model.TotalEpisodes</h3>
            </div>
        </div>
    </div>
</div>

<!-- Charts Section -->
<div class="row justify-content-center text-center">
    <!-- Episode Status Chart -->
    <div class="col-md-5 mb-4">
        <div class="card shadow-sm">
            <div class="card-body">
                <h5 class="card-title">Episode Status Breakdown</h5>
                <canvas id="episodeChart" style="max-height:300px;"></canvas>
            </div>
        </div>
    </div>

    <!-- Users by Role Chart -->
    <div class="col-md-5 mb-4">
        <div class="card shadow-sm">
            <div class="card-body">
                <h5 class="card-title">Users by Role</h5>
                <canvas id="userRoleChart" style="max-height:300px;"></canvas>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Episode Status Chart
        new Chart(document.getElementById('episodeChart'), {
            type: 'doughnut',
            data: {
                labels: ['Pending', 'Approved', 'Rejected'],
                datasets: [{
                    data: [@Model.PendingEpisodes, @Model.ApprovedEpisodes, @Model.RejectedEpisodes],
                    backgroundColor: ['#f39c12', '#28a745', '#dc3545']
                }]
            },
            options: { responsive: true, maintainAspectRatio: false }
        });

        // Users by Role Chart
        new Chart(document.getElementById('userRoleChart'), {
            type: 'pie',
            data: {
                labels: ['Admin', 'Podcaster', 'Listener'],
                datasets: [{
                    data: [@Model.AdminCount, @Model.PodcasterCount, @Model.ListenerCount],
                    backgroundColor: ['#343a40', '#17a2b8', '#ffc107']
                }]
            },
            options: { responsive: true, maintainAspectRatio: false }
        });
    </script>
}
